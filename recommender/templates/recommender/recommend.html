{% extends 'base.html' %}
{% block content %}

<h1 class="mt-3">Recomendador de Películas</h1>
<p class="text-muted">Escribe un prompt. Ej.: <em>Película de la segunda guerra mundial</em></p>

<form method="get" class="row g-3 mb-4">
  <div class="col-sm-8 col-md-6">
    <input type="text" name="q" class="form-control" placeholder="¿Qué te gustaría ver?"
           value="{{ prompt|default:'' }}">
  </div>
  <div class="col-auto">
    <button type="submit" class="btn btn-primary">Buscar</button>
  </div>
</form>

{% if prompt and not movie %}
  <div class="alert alert-warning">No encontramos resultados para: <strong>{{ prompt }}</strong>.</div>
{% endif %}

{% if movie %}
  <div class="card mt-3" style="max-width: 900px;">
    <div class="row g-0">
      <div class="col-md-3">
        <img src="{{ movie.image.url }}" class="img-fluid rounded-start" alt="{{ movie.title }}">
      </div>
      <div class="col-md-9">
        <div class="card-body">
          <h5 class="card-title">{{ movie.title }}</h5>
          {% if score %}
            <p class="text-muted">Similitud: {{ score|floatformat:3 }}</p>
          {% endif %}
          <p>{{ movie.description }}</p>
        </div>
      </div>
    </div>
  </div>
{% endif %}


{% endblock content %}
